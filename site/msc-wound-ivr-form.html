<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MSC Wound Care Insurance Verification Request</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/modern-form.css">
</head>
<body>
    <header class="header">
        <div class="container header-content">
            <h1 class="header-title">MSC Wound Care Portal</h1>
            <nav class="header-nav">
                <a href="#" class="header-nav-item">Home</a>
                <a href="#" class="header-nav-item">Forms</a>
                <a href="#" class="header-nav-item">Support</a>
            </nav>
        </div>
    </header>
    
    <main>
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2>Insurance Verification Request</h2>
                    <p>Please complete all required fields to submit your request</p>
                </div>
                
                <div class="card-body">
                    <div id="alertsContainer"></div>
                    
                    <div class="progress-container">
                        <div class="progress-steps">
                            <div class="progress-step" data-step="1">
                                <div class="progress-step-number">1</div>
                                <div class="progress-step-label">Form Setup</div>
                            </div>
                            <div class="progress-step" data-step="2">
                                <div class="progress-step-number">2</div>
                                <div class="progress-step-label">Patient & Insurance</div>
                            </div>
                            <div class="progress-step" data-step="3">
                                <div class="progress-step-number">3</div>
                                <div class="progress-step-label">Provider & Facility</div>
                            </div>
                            <div class="progress-step" data-step="4">
                                <div class="progress-step-number">4</div>
                                <div class="progress-step-label">Wound & Product</div>
                            </div>
                            <div class="progress-step" data-step="5">
                                <div class="progress-step-number">5</div>
                                <div class="progress-step-label">Review & Submit</div>
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-bar-fill"></div>
                        </div>
                        <div class="progress-text">
                            <span>Step <span id="currentStep">1</span> of 5</span>
                            <span><span id="completionPercentage">0</span>% Complete</span>
                        </div>
                    </div>

                    <form id="ivrForm" action="api/submit-ivr" method="POST" enctype="multipart/form-data">
                        <!-- Step 1: Form Setup -->
                        <div class="form-step" data-step="1">
                            <div class="form-section">
                                <div class="form-section-title">Form Setup</div>
                                
                                <div class="row">
                                    <div class="col-12">
                                        <div class="form-group">
                                            <label for="manufacturer">Manufacturer <span class="text-danger">*</span></label>
                                            <select id="manufacturer" name="manufacturerId" class="form-control" required>
                                                <option value="">Select Manufacturer</option>
                                                <!-- Manufacturer options would be populated from database -->
                                            </select>
                                            <div class="form-text">Select the manufacturer for the product being requested</div>
                                            <div class="invalid-feedback">Please select a manufacturer</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="request_type">Request Type <span class="text-danger">*</span></label>
                                            <select id="request_type" name="requestType" class="form-control" required>
                                                <option value="">Select Request Type</option>
                                                <option value="new_request">New Request</option>
                                                <option value="reverification">Re-verification</option>
                                                <option value="additional_applications">Additional Applications</option>
                                                <option value="new_insurance">New Insurance</option>
                                            </select>
                                            <div class="invalid-feedback">Please select a request type</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="request_date">Request Date <span class="text-danger">*</span></label>
                                            <input type="date" id="request_date" name="requestDate" class="form-control" required>
                                            <div class="invalid-feedback">Please select a request date</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="sales_rep">Sales Representative <span class="text-danger">*</span></label>
                                            <select id="sales_rep" name="repId" class="form-control" required>
                                                <option value="">Select Sales Representative</option>
                                                <!-- Rep options would be populated from database -->
                                            </select>
                                            <div class="invalid-feedback">Please select a sales representative</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="additional_emails">Additional Notification Emails</label>
                                            <input type="text" id="additional_emails" name="additionalEmails" class="form-control">
                                            <div class="form-text">Separate multiple emails with commas</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mt-4">
                                <div class="col-12">
                                    <button type="button" class="btn btn-primary btn-block" data-action="next">Continue to Patient Information</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Step 2: Patient & Insurance Information -->
                        <div class="form-step" data-step="2">
                            <div class="form-section">
                                <div class="form-section-title">Patient Information</div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="patient_first_name">First Name <span class="text-danger">*</span></label>
                                            <input type="text" id="patient_first_name" name="patientFirstName" class="form-control" required>
                                            <div class="invalid-feedback">Please enter the patient's first name</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="patient_last_name">Last Name <span class="text-danger">*</span></label>
                                            <input type="text" id="patient_last_name" name="patientLastName" class="form-control" required>
                                            <div class="invalid-feedback">Please enter the patient's last name</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="patient_dob">Date of Birth <span class="text-danger">*</span></label>
                                            <input type="date" id="patient_dob" name="patientDOB" class="form-control" required>
                                            <div class="invalid-feedback">Please enter the patient's date of birth</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="patient_phone">Phone Number</label>
                                            <input type="tel" id="patient_phone" name="patientPhone" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-section">
                                <div class="form-section-title">Insurance Information</div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="primary_insurance">Primary Insurance <span class="text-danger">*</span></label>
                                            <input type="text" id="primary_insurance" name="primaryInsurance" class="form-control" required>
                                            <div class="invalid-feedback">Please enter the primary insurance</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="policy_number">Policy Number <span class="text-danger">*</span></label>
                                            <input type="text" id="policy_number" name="policyNumber" class="form-control" required>
                                            <div class="invalid-feedback">Please enter the policy number</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="secondary_insurance">Secondary Insurance</label>
                                            <input type="text" id="secondary_insurance" name="secondaryInsurance" class="form-control">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="secondary_policy_number">Secondary Policy Number</label>
                                            <input type="text" id="secondary_policy_number" name="secondaryPolicyNumber" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mt-4">
                                <div class="col-md-6">
                                    <button type="button" class="btn btn-secondary" data-action="back">Back</button>
                                </div>
                                <div class="col-md-6">
                                    <button type="button" class="btn btn-primary" data-action="next">Continue to Provider Information</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Step 5: Required Documents -->
                        <div class="form-step" data-step="5">
                            <div class="form-section">
                                <div class="form-section-title">Required Documents</div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="demographic-file-upload">Patient Demographic Sheet</label>
                                            <input type="file" id="demographic-file-upload" name="patientDemographicSheet" class="form-control">
                                            <div class="form-text">Upload patient demographic information (PDF, PNG, JPG up to 10MB)</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="insurance-file-upload">Front and Back of Insurance Cards</label>
                                            <input type="file" id="insurance-file-upload" name="insuranceCards" class="form-control" multiple>
                                            <div class="form-text">Upload images of insurance cards (PDF, PNG, JPG up to 10MB)</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-12">
                                        <div class="form-group">
                                            <label for="clinical-notes-upload">Clinical Notes</label>
                                            <input type="file" id="clinical-notes-upload" name="clinicalNotes" class="form-control">
                                            <div class="form-text">Upload any relevant clinical notes (PDF, PNG, JPG up to 10MB)</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-section">
                                <div class="form-section-title">Authorization</div>
                                
                                <div class="row">
                                    <div class="col-12">
                                        <div class="form-group">
                                            <label for="signature">Authorized Signature <span class="text-danger">*</span></label>
                                            <div class="signature-pad-container">
                                                <canvas id="signaturePad" class="signature-pad"></canvas>
                                            </div>
                                            <div class="text-right mt-2">
                                                <button type="button" class="btn btn-sm btn-secondary" id="clearSignature">Clear Signature</button>
                                            </div>
                                            <input type="hidden" id="signature" name="signature" required>
                                            <div class="invalid-feedback">Please provide a signature</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="signatureDate">Date <span class="text-danger">*</span></label>
                                            <input type="date" id="signatureDate" name="signatureDate" class="form-control" required>
                                            <div class="invalid-feedback">Please enter the date</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="responseContainer"></div>
                            
                            <div class="row mt-4">
                                <div class="col-md-6">
                                    <button type="button" class="btn btn-secondary" data-action="back">Back</button>
                                </div>
                                <div class="col-md-6">
                                    <button type="submit" class="btn btn-primary">Submit Request</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                
                <div class="card-footer">
                    <p class="text-center">MSC Wound Care &copy; 2025 | Need help? Contact support at (555) 123-4567</p>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Include the new form handler script -->
    <script src="js/form-handler.js"></script>
    <script src="js/ivr-form.js"></script>
</body>
</html>
