<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MSC Wound Care Universal Order Form</title>
    <style>
        :root {
            --primary: #0056b3;
            --primary-dark: #003d82;
            --secondary: #6c757d;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --white: #ffffff;
            --border-radius: 0.25rem;
            --box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            --transition: all 0.2s ease-in-out;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background-color: #f5f7fa;
            padding: 0;
            margin: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        header {
            background-color: var(--primary);
            color: var(--white);
            padding: 1rem 0;
            box-shadow: var(--box-shadow);
        }

        header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        header h1 {
            font-size: 1.5rem;
            margin: 0;
        }

        main {
            padding: 2rem 0;
        }

        .card {
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            margin-bottom: 1.5rem;
            overflow: hidden;
        }

        .card-header {
            padding: 1rem;
            background-color: var(--light);
            border-bottom: 1px solid #dee2e6;
        }

        .card-body {
            padding: 1.5rem;
        }

        .card-footer {
            padding: 1rem;
            background-color: var(--light);
            border-top: 1px solid #dee2e6;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        input[type="number"],
        input[type="currency"],
        select,
        textarea {
            width: 100%;
            padding: 0.5rem 0.75rem;
            font-size: 1rem;
            line-height: 1.5;
            color: var(--dark);
            background-color: var(--white);
            background-clip: padding-box;
            border: 1px solid #ced4da;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="tel"]:focus,
        input[type="date"]:focus,
        input[type="number"]:focus,
        input[type="currency"]:focus,
        select:focus,
        textarea:focus {
            border-color: var(--primary);
            outline: 0;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .checkbox-group input[type="checkbox"] {
            margin-right: 0.5rem;
        }

        .btn {
            display: inline-block;
            font-weight: 500;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            user-select: none;
            border: 1px solid transparent;
            padding: 0.5rem 1rem;
            font-size: 1rem;
            line-height: 1.5;
            border-radius: var(--border-radius);
            transition: var(--transition);
            cursor: pointer;
        }

        .btn-primary {
            color: var(--white);
            background-color: var(--primary);
            border-color: var(--primary);
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            border-color: var(--primary-dark);
        }

        .btn-secondary {
            color: var(--white);
            background-color: var(--secondary);
            border-color: var(--secondary);
        }

        .btn-secondary:hover {
            background-color: #5a6268;
            border-color: #545b62;
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        .form-section {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #dee2e6;
        }

        .form-section:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .form-section-title {
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #dee2e6;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin-right: -0.5rem;
            margin-left: -0.5rem;
        }

        .form-col {
            flex: 1 0 0%;
            padding-right: 0.5rem;
            padding-left: 0.5rem;
            margin-bottom: 1rem;
        }

        .form-col-full {
            flex: 0 0 100%;
            max-width: 100%;
            padding-right: 0.5rem;
            padding-left: 0.5rem;
            margin-bottom: 1rem;
        }

        .form-col-half {
            flex: 0 0 50%;
            max-width: 50%;
            padding-right: 0.5rem;
            padding-left: 0.5rem;
            margin-bottom: 1rem;
        }

        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
            }
            
            .form-col, .form-col-half {
                flex: 1 0 100%;
                max-width: 100%;
            }
        }

        .error-message {
            color: var(--danger);
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }

        .success-message {
            color: var(--success);
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }

        .required-indicator {
            color: var(--danger);
            margin-left: 0.2rem;
        }

        .field-description {
            font-size: 0.875rem;
            color: var(--secondary);
            margin-top: 0.25rem;
        }

        #responseContainer {
            display: none;
            margin-top: 1.5rem;
            padding: 1rem;
            border-radius: var(--border-radius);
            background-color: var(--light);
        }

        #responseContainer.success {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        #responseContainer.error {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .spinner {
            display: inline-block;
            width: 1rem;
            height: 1rem;
            border: 0.2rem solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--white);
            animation: spin 1s ease-in-out infinite;
            margin-right: 0.5rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .btn-submit {
            position: relative;
        }

        .btn-submit:disabled {
            cursor: not-allowed;
            opacity: 0.65;
        }

        .btn-submit[data-loading="true"] .btn-text {
            visibility: hidden;
        }

        .btn-submit[data-loading="true"]::after {
            content: "";
            position: absolute;
            width: 1rem;
            height: 1rem;
            top: calc(50% - 0.5rem);
            left: calc(50% - 0.5rem);
            border: 0.2rem solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--white);
            animation: spin 1s ease-in-out infinite;
        }

        .progress-container {
            margin-bottom: 2rem;
        }

        .progress-bar {
            height: 5px;
            background-color: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background-color: var(--primary);
            transition: width 0.3s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            font-size: 0.875rem;
            color: var(--secondary);
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .progress-step {
            text-align: center;
            flex: 1;
            position: relative;
        }

        .progress-step-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #e9ecef;
            color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 0.5rem;
            font-weight: 500;
            position: relative;
            z-index: 1;
        }

        .progress-step.active .progress-step-number {
            background-color: var(--primary);
            color: var(--white);
        }

        .progress-step.completed .progress-step-number {
            background-color: var(--success);
            color: var(--white);
        }

        .progress-step-label {
            font-size: 0.8rem;
            color: var(--secondary);
        }

        .progress-step.active .progress-step-label {
            color: var(--primary);
            font-weight: 500;
        }

        .progress-step-line {
            position: absolute;
            top: 15px;
            height: 2px;
            background-color: #e9ecef;
            width: 100%;
            left: -50%;
            z-index: 0;
        }

        .progress-step:first-child .progress-step-line {
            display: none;
        }

        .progress-step.completed .progress-step-line {
            background-color: var(--success);
        }

        .product-item {
            border: 1px solid #dee2e6;
            border-radius: var(--border-radius);
            padding: 1rem;
            margin-bottom: 1rem;
            background-color: #f8f9fa;
        }

        .add-product-btn {
            margin-bottom: 1.5rem;
        }

        .remove-product-btn {
            background-color: var(--danger);
            color: var(--white);
            border: none;
            border-radius: var(--border-radius);
            padding: 0.25rem 0.5rem;
            cursor: pointer;
            font-size: 0.875rem;
            float: right;
        }

        .conditional-field {
            display: none;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>MSC Wound Care Universal Order Form</h1>
        </div>
    </header>
    
    <main>
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2>Universal Order Form</h2>
                    <p>Please complete all required fields to submit your order</p>
                </div>
                
                <div class="card-body">
                    <div class="progress-container">
                        <div class="progress-steps">
                            <div class="progress-step active" data-step="1">
                                <div class="progress-step-line"></div>
                                <div class="progress-step-number">1</div>
                                <div class="progress-step-label">Order Info</div>
                            </div>
                            <div class="progress-step" data-step="2">
                                <div class="progress-step-line"></div>
                                <div class="progress-step-number">2</div>
                                <div class="progress-step-label">Facility Info</div>
                            </div>
                            <div class="progress-step" data-step="3">
                                <div class="progress-step-line"></div>
                                <div class="progress-step-number">3</div>
                                <div class="progress-step-label">Shipping</div>
                            </div>
                            <div class="progress-step" data-step="4">
                                <div class="progress-step-line"></div>
                                <div class="progress-step-number">4</div>
                                <div class="progress-step-label">Products</div>
                            </div>
                            <div class="progress-step" data-step="5">
                                <div class="progress-step-line"></div>
                                <div class="progress-step-number">5</div>
                                <div class="progress-step-label">Review & Submit</div>
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-bar-fill" style="width: 20%;"></div>
                        </div>
                        <div class="progress-text">
                            <span>Step <span id="currentStep">1</span> of 5</span>
                            <span><span id="completionPercentage">20</span>% Complete</span>
                        </div>
                    </div>

                    <form id="universalOrderForm">
                        <!-- Step 1: Order Information -->
                        <div class="form-step" data-step="1">
                            <div class="form-section">
                                <div class="form-section-title">Order Information</div>
                                
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="orderNumber">Order Number <span class="required-indicator">*</span></label>
                                            <input type="text" id="orderNumber" name="orderInfo.orderNumber" required placeholder="WC-YYYY-NNNN">
                                            <div class="field-description">Unique identifier for this order</div>
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="orderDate">Order Date <span class="required-indicator">*</span></label>
                                            <input type="date" id="orderDate" name="orderInfo.orderDate" required>
                                            <div class="field-description">Date the order was placed</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="poNumber">PO Number</label>
                                            <input type="text" id="poNumber" name="orderInfo.poNumber">
                                            <div class="field-description">Purchase order number if applicable</div>
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="requestedDeliveryDate">Requested Delivery Date</label>
                                            <input type="date" id="requestedDeliveryDate" name="orderInfo.requestedDeliveryDate">
                                            <div class="field-description">When the order should be delivered</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="anticipatedApplicationDate">Anticipated Application Date</label>
                                            <input type="date" id="anticipatedApplicationDate" name="orderInfo.anticipatedApplicationDate">
                                            <div class="field-description">When the product will be used</div>
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="dateOfCase">Date of Case</label>
                                            <input type="date" id="dateOfCase" name="orderInfo.dateOfCase">
                                            <div class="field-description">Date of surgical case or procedure</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="status">Status <span class="required-indicator">*</span></label>
                                            <select id="status" name="orderInfo.status" required>
                                                <option value="draft">Draft</option>
                                                <option value="submitted">Submitted</option>
                                                <option value="processing">Processing</option>
                                                <option value="shipped">Shipped</option>
                                                <option value="delivered">Delivered</option>
                                                <option value="cancelled">Cancelled</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                
                            <div class="form-row">
                                <div class="form-col">
                                    <button type="button" class="btn btn-primary btn-block" id="nextToStep2">Continue to Facility Information</button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 2: Facility Information -->
                        <div class="form-step" data-step="2" style="display: none;">
                            <div class="form-section">
                                <div class="form-section-title">Facility Information</div>
                                
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="facilityName">Facility Name <span class="required-indicator">*</span></label>
                                            <input type="text" id="facilityName" name="facilityInfo.facilityName" required>
                                            <div class="field-description">Name of the healthcare facility</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="contactName">Contact Name <span class="required-indicator">*</span></label>
                                            <input type="text" id="contactName" name="facilityInfo.contactName" required>
                                            <div class="field-description">Primary contact at the facility</div>
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="contactTitle">Contact Title</label>
                                            <input type="text" id="contactTitle" name="facilityInfo.contactTitle">
                                            <div class="field-description">Job title of the contact person</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="contactPhone">Contact Phone <span class="required-indicator">*</span></label>
                                            <input type="tel" id="contactPhone" name="facilityInfo.contactPhone" required>
                                            <div class="field-description">Phone number for the contact person</div>
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="contactEmail">Contact Email</label>
                                            <input type="email" id="contactEmail" name="facilityInfo.contactEmail">
                                            <div class="field-description">Email address for the contact person</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="contactFax">Contact Fax</label>
                                            <input type="tel" id="contactFax" name="facilityInfo.contactFax">
                                            <div class="field-description">Fax number for the facility</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <button type="button" class="btn btn-secondary" id="backToStep1">Back</button>
                                </div>
                                <div class="form-col">
                                    <button type="button" class="btn btn-primary" id="nextToStep3">Continue to Shipping Information</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Step 3: Shipping & Billing Information -->
                        <div class="form-step" data-step="3" style="display: none;">
                            <div class="form-section">
                                <div class="form-section-title">Shipping Information</div>
                                
                                <div class="form-row">
                                    <div class="form-col-full">
                                        <div class="form-group">
                                            <label for="shippingAddressLine1">Address Line 1 <span class="required-indicator">*</span></label>
                                            <input type="text" id="shippingAddressLine1" name="shippingInfo.shippingAddressLine1" required>
                                            <div class="field-description">Street address for shipping</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-col-full">
                                        <div class="form-group">
                                            <label for="shippingAddressLine2">Address Line 2</label>
                                            <input type="text" id="shippingAddressLine2" name="shippingInfo.shippingAddressLine2">
                                            <div class="field-description">Suite, unit, etc.</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="shippingCity">City <span class="required-indicator">*</span></label>
                                            <input type="text" id="shippingCity" name="shippingInfo.shippingCity" required>
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="shippingState">State <span class="required-indicator">*</span></label>
                                            <input type="text" id="shippingState" name="shippingInfo.shippingState" required>
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="shippingZipCode">ZIP Code <span class="required-indicator">*</span></label>
                                            <input type="text" id="shippingZipCode" name="shippingInfo.shippingZipCode" required>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="shippingMethod">Shipping Method <span class="required-indicator">*</span></label>
                                            <select id="shippingMethod" name="shippingInfo.shippingMethod" required>
                                                <option value="fedex_standard">FedEx Standard</option>
                                                <option value="fedex_overnight">FedEx Overnight</option>
                                                <option value="fedex_2day">FedEx 2-Day</option>
                                                <option value="pickup">Pickup</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="shippingAccount">Shipping Account Number</label>
                                            <input type="text" id="shippingAccount" name="shippingInfo.shippingAccount">
                                            <div class="field-description">Customer's shipping account if applicable</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-section">
                                <div class="form-section-title">Billing Information</div>
                                
                                <div class="form-row">
                                    <div class="form-col-full">
                                        <div class="form-group checkbox-group">
                                            <input type="checkbox" id="sameAsShipping" name="billingInfo.sameAsShipping" checked>
                                            <label for="sameAsShipping">Same as Shipping Address</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="billingFields" class="conditional-field">
                                    <div class="form-row">
                                        <div class="form-col-full">
                                            <div class="form-group">
                                                <label for="billingFacilityName">Billing Facility Name</label>
                                                <input type="text" id="billingFacilityName" name="billingInfo.billingFacilityName">
                                                <div class="field-description">Only if different from shipping facility</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-col-full">
                                            <div class="form-group">
                                                <label for="billingAddressLine1">Address Line 1</label>
                                                <input type="text" id="billingAddressLine1" name="billingInfo.billingAddressLine1">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-col-full">
                                            <div class="form-group">
                                                <label for="billingAddressLine2">Address Line 2</label>
                                                <input type="text" id="billingAddressLine2" name="billingInfo.billingAddressLine2">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-col">
                                            <div class="form-group">
                                                <label for="billingCity">City</label>
                                                <input type="text" id="billingCity" name="billingInfo.billingCity">
                                            </div>
                                        </div>
                                        <div class="form-col">
                                            <div class="form-group">
                                                <label for="billingState">State</label>
                                                <input type="text" id="billingState" name="billingInfo.billingState">
                                            </div>
                                        </div>
                                        <div class="form-col">
                                            <div class="form-group">
                                                <label for="billingZipCode">ZIP Code</label>
                                                <input type="text" id="billingZipCode" name="billingInfo.billingZipCode">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-col">
                                            <div class="form-group">
                                                <label for="billingContactName">Billing Contact Name</label>
                                                <input type="text" id="billingContactName" name="billingInfo.billingContactName">
                                            </div>
                                        </div>
                                        <div class="form-col">
                                            <div class="form-group">
                                                <label for="billingContactPhone">Billing Contact Phone</label>
                                                <input type="tel" id="billingContactPhone" name="billingInfo.billingContactPhone">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-col">
                                            <div class="form-group">
                                                <label for="billingContactEmail">Billing Contact Email</label>
                                                <input type="email" id="billingContactEmail" name="billingInfo.billingContactEmail">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-section">
                                <div class="form-section-title">Payment Information</div>
                                
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="paymentMethod">Payment Method <span class="required-indicator">*</span></label>
                                            <select id="paymentMethod" name="paymentInfo.paymentMethod" required>
                                                <option value="terms">Terms</option>
                                                <option value="credit_card">Credit Card</option>
                                                <option value="ach">ACH Transfer</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="paymentTerms">Payment Terms</label>
                                            <select id="paymentTerms" name="paymentInfo.paymentTerms">
                                                <option value="net30">Net 30</option>
                                                <option value="net60">Net 60</option>
                                                <option value="after_reimbursement">After Reimbursement</option>
                                            </select>
                                            <div class="field-description">Only applicable if payment method is Terms</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-col-full">
                                        <div class="form-group">
                                            <label for="paymentNotes">Payment Notes</label>
                                            <textarea id="paymentNotes" name="paymentInfo.paymentNotes" rows="3"></textarea>
                                            <div class="field-description">Any special payment instructions</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <button type="button" class="btn btn-secondary" id="backToStep2">Back</button>
                                </div>
                                <div class="form-col">
                                    <button type="button" class="btn btn-primary" id="nextToStep4">Continue to Products</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Step 4: Product Information -->
                        <div class="form-step" data-step="4" style="display: none;">
                            <div class="form-section">
                                <div class="form-section-title">Product Information</div>
                                
                                <div id="productContainer">
                                    <!-- Product items will be added here dynamically -->
                                    <div class="product-item" data-product-index="0">
                                        <button type="button" class="remove-product-btn">Remove</button>
                                        <div class="form-row">
                                            <div class="form-col">
                                                <div class="form-group">
                                                    <label for="manufacturer-0">Manufacturer <span class="required-indicator">*</span></label>
                                                    <select id="manufacturer-0" name="products[0].manufacturer" required>
                                                        <option value="">Select Manufacturer</option>
                                                        <option value="ACZ_Distribution">ACZ Distribution</option>
                                                        <option value="Advanced_Solution">Advanced Solution</option>
                                                        <option value="MedLife_Solutions">MedLife Solutions</option>
                                                        <option value="BioWerX">BioWerX</option>
                                                        <option value="Imbed_Biosciences">Imbed Biosciences</option>
                                                        <option value="Stability_Biologics">Stability Biologics</option>
                                                        <option value="Legacy_Medical_Consultants">Legacy Medical Consultants</option>
                                                        <option value="BioWound_Solutions">BioWound Solutions</option>
                                                    </select>
                                                    <div class="field-description">Company that makes the product</div>
                                                </div>
                                            </div>
                                            <div class="form-col">
                                                <div class="form-group">
                                                    <label for="productCode-0">Product Code <span class="required-indicator">*</span></label>
                                                    <input type="text" id="productCode-0" name="products[0].productCode" required>
                                                    <div class="field-description">SKU or item number</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-row">
                                            <div class="form-col-full">
                                                <div class="form-group">
                                                    <label for="description-0">Description <span class="required-indicator">*</span></label>
                                                    <input type="text" id="description-0" name="products[0].description" required>
                                                    <div class="field-description">Product name and details</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-row">
                                            <div class="form-col">
                                                <div class="form-group">
                                                    <label for="size-0">Size <span class="required-indicator">*</span></label>
                                                    <input type="text" id="size-0" name="products[0].size" required>
                                                    <div class="field-description">Dimensions of the product</div>
                                                </div>
                                            </div>
                                            <div class="form-col">
                                                <div class="form-group">
                                                    <label for="quantity-0">Quantity <span class="required-indicator">*</span></label>
                                                    <input type="number" id="quantity-0" name="products[0].quantity" required min="1" value="1">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-row">
                                            <div class="form-col">
                                                <div class="form-group">
                                                    <label for="unitPrice-0">Unit Price <span class="required-indicator">*</span></label>
                                                    <input type="number" id="unitPrice-0" name="products[0].unitPrice" required step="0.01">
                                                    <div class="field-description">Price per unit</div>
                                                </div>
                                            </div>
                                            <div class="form-col">
                                                <div class="form-group">
                                                    <label for="totalPrice-0">Total Price</label>
                                                    <input type="number" id="totalPrice-0" name="products[0].totalPrice" readonly>
                                                    <div class="field-description">Automatically calculated</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <button type="button" class="btn btn-secondary add-product-btn" id="addProductBtn">
                                    + Add Another Product
                                </button>
                            </div>
                            
                            <div class="form-section">
                                <div class="form-section-title">Physician Information</div>
                                
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="physicianName">Physician Name</label>
                                            <input type="text" id="physicianName" name="physicianInfo.physicianName">
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="physicianNPI">Physician NPI</label>
                                            <input type="text" id="physicianNPI" name="physicianInfo.physicianNPI">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="surgeonName">Surgeon Name</label>
                                            <input type="text" id="surgeonName" name="physicianInfo.surgeonName">
                                            <div class="field-description">If different from physician</div>
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="caseType">Case Type</label>
                                            <input type="text" id="caseType" name="physicianInfo.caseType">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-section">
                                <div class="form-section-title">Patient Information</div>
                                
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="patientId">Patient ID</label>
                                            <input type="text" id="patientId" name="patientInfo.patientId">
                                            <div class="field-description">Patient identifier (no PHI)</div>
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="dateOfService">Date of Service</label>
                                            <input type="date" id="dateOfService" name="patientInfo.dateOfService">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <button type="button" class="btn btn-secondary" id="backToStep3">Back</button>
                                </div>
                                <div class="form-col">
                                    <button type="button" class="btn btn-primary" id="nextToStep5">Continue to Review</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Step 5: Review and Submit -->
                        <div class="form-step" data-step="5" style="display: none;">
                            <div class="form-section">
                                <div class="form-section-title">Additional Information</div>
                                
                                <div class="form-row">
                                    <div class="form-col-full">
                                        <div class="form-group">
                                            <label for="specialInstructions">Special Instructions</label>
                                            <textarea id="specialInstructions" name="additionalInfo.specialInstructions" rows="4"></textarea>
                                            <div class="field-description">Any special notes or requests</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="salesRepName">Sales Representative</label>
                                            <input type="text" id="salesRepName" name="additionalInfo.salesRepName">
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="distributorName">Distributor Name</label>
                                            <input type="text" id="distributorName" name="additionalInfo.distributorName">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-section">
                                <div class="form-section-title">Order Summary</div>
                                <div id="orderSummary">
                                    <!-- This will be populated with JS -->
                                    <p>Please review your order details before submitting.</p>
                                </div>
                            </div>
                            
                            <div id="responseContainer"></div>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <button type="button" class="btn btn-secondary" id="backToStep4">Back</button>
                                </div>
                                <div class="form-col">
                                    <button type="submit" class="btn btn-primary btn-submit" id="submitBtn">
                                        <span class="btn-text">Submit Order</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                
                <div class="card-footer">
                    <p class="text-center">MSC Wound Care &copy; 2025 | Need help? Contact support at (555) 123-4567</p>
                </div>
            </div>
        </div>
    </main>
    
    <script>
        // Set default date to today
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('orderDate').value = today;
            
            // Step navigation
            setupStepNavigation();
            
            // Conditional fields
            setupConditionalFields();
            
            // Product calculations
            setupProductCalculations();
            
            // Add/remove product functionality
            setupProductControls();
            
            // Form submission
            setupFormSubmission();
        });
        
        function setupStepNavigation() {
            // Next buttons
            document.getElementById('nextToStep2').addEventListener('click', () => goToStep(2));
            document.getElementById('nextToStep3').addEventListener('click', () => goToStep(3));
            document.getElementById('nextToStep4').addEventListener('click', () => goToStep(4));
            document.getElementById('nextToStep5').addEventListener('click', () => goToStep(5));
            
            // Back buttons
            document.getElementById('backToStep1').addEventListener('click', () => goToStep(1));
            document.getElementById('backToStep2').addEventListener('click', () => goToStep(2));
            document.getElementById('backToStep3').addEventListener('click', () => goToStep(3));
            document.getElementById('backToStep4').addEventListener('click', () => goToStep(4));
        }
        
        function goToStep(step) {
            // Hide all steps
            document.querySelectorAll('.form-step').forEach(el => {
                el.style.display = 'none';
            });
            
            // Show the target step
            document.querySelector(`.form-step[data-step="${step}"]`).style.display = 'block';
            
            // Update progress bar and step indicators
            updateProgress(step);
            
            // If going to review step, generate summary
            if (step === 5) {
                generateOrderSummary();
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }
        
        function updateProgress(step) {
            const totalSteps = 5;
            const progress = (step / totalSteps) * 100;
            
            // Update progress bar
            document.querySelector('.progress-bar-fill').style.width = `${progress}%`;
            document.getElementById('currentStep').textContent = step;
            document.getElementById('completionPercentage').textContent = Math.round(progress);
            
            // Update step indicators
            document.querySelectorAll('.progress-step').forEach(el => {
                const stepNum = parseInt(el.dataset.step);
                el.classList.remove('active', 'completed');
                
                if (stepNum === step) {
                    el.classList.add('active');
                } else if (stepNum < step) {
                    el.classList.add('completed');
                }
            });
        }
        
        function setupConditionalFields() {
            const sameAsShippingCheckbox = document.getElementById('sameAsShipping');
            const billingFields = document.getElementById('billingFields');
            
            sameAsShippingCheckbox.addEventListener('change', function() {
                billingFields.style.display = this.checked ? 'none' : 'block';
            });
            
            // Initial state
            billingFields.style.display = sameAsShippingCheckbox.checked ? 'none' : 'block';
            
            // Payment method conditional logic
            const paymentMethodSelect = document.getElementById('paymentMethod');
            const paymentTermsGroup = document.getElementById('paymentTerms').closest('.form-group');
            
            paymentMethodSelect.addEventListener('change', function() {
                paymentTermsGroup.style.display = this.value === 'terms' ? 'block' : 'none';
            });
            
            // Initial state
            paymentTermsGroup.style.display = paymentMethodSelect.value === 'terms' ? 'block' : 'none';
        }
        
        function setupProductCalculations() {
            const recalculateTotal = (index) => {
                const quantityInput = document.getElementById(`quantity-${index}`);
                const unitPriceInput = document.getElementById(`unitPrice-${index}`);
                const totalPriceInput = document.getElementById(`totalPrice-${index}`);
                
                if (quantityInput && unitPriceInput && totalPriceInput) {
                    const quantity = parseFloat(quantityInput.value) || 0;
                    const unitPrice = parseFloat(unitPriceInput.value) || 0;
                    const total = quantity * unitPrice;
                    
                    totalPriceInput.value = total.toFixed(2);
                }
            };
            
            // Set up event listeners for the initial product
            const setupProductEvents = (index) => {
                const quantityInput = document.getElementById(`quantity-${index}`);
                const unitPriceInput = document.getElementById(`unitPrice-${index}`);
                
                if (quantityInput && unitPriceInput) {
                    quantityInput.addEventListener('input', () => recalculateTotal(index));
                    unitPriceInput.addEventListener('input', () => recalculateTotal(index));
                }
            };
            
            // Initial setup for first product
            setupProductEvents(0);
            
            // Make this function available globally for new products
            window.setupProductEvents = setupProductEvents;
            window.recalculateTotal = recalculateTotal;
        }
        
        function setupProductControls() {
            const productContainer = document.getElementById('productContainer');
            const addProductBtn = document.getElementById('addProductBtn');
            
            // Add product button
            addProductBtn.addEventListener('click', function() {
                const products = productContainer.querySelectorAll('.product-item');
                const newIndex = products.length;
                
                const productTemplate = `
                    <div class="product-item" data-product-index="${newIndex}">
                        <button type="button" class="remove-product-btn">Remove</button>
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="manufacturer-${newIndex}">Manufacturer <span class="required-indicator">*</span></label>
                                    <select id="manufacturer-${newIndex}" name="products[${newIndex}].manufacturer" required>
                                        <option value="">Select Manufacturer</option>
                                        <option value="ACZ_Distribution">ACZ Distribution</option>
                                        <option value="Advanced_Solution">Advanced Solution</option>
                                        <option value="MedLife_Solutions">MedLife Solutions</option>
                                        <option value="BioWerX">BioWerX</option>
                                        <option value="Imbed_Biosciences">Imbed Biosciences</option>
                                        <option value="Stability_Biologics">Stability Biologics</option>
                                        <option value="Legacy_Medical_Consultants">Legacy Medical Consultants</option>
                                        <option value="BioWound_Solutions">BioWound Solutions</option>
                                    </select>
                                    <div class="field-description">Company that makes the product</div>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="productCode-${newIndex}">Product Code <span class="required-indicator">*</span></label>
                                    <input type="text" id="productCode-${newIndex}" name="products[${newIndex}].productCode" required>
                                    <div class="field-description">SKU or item number</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-col-full">
                                <div class="form-group">
                                    <label for="description-${newIndex}">Description <span class="required-indicator">*</span></label>
                                    <input type="text" id="description-${newIndex}" name="products[${newIndex}].description" required>
                                    <div class="field-description">Product name and details</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="size-${newIndex}">Size <span class="required-indicator">*</span></label>
                                    <input type="text" id="size-${newIndex}" name="products[${newIndex}].size" required>
                                    <div class="field-description">Dimensions of the product</div>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="quantity-${newIndex}">Quantity <span class="required-indicator">*</span></label>
                                    <input type="number" id="quantity-${newIndex}" name="products[${newIndex}].quantity" required min="1" value="1">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="unitPrice-${newIndex}">Unit Price <span class="required-indicator">*</span></label>
                                    <input type="number" id="unitPrice-${newIndex}" name="products[${newIndex}].unitPrice" required step="0.01">
                                    <div class="field-description">Price per unit</div>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="totalPrice-${newIndex}">Total Price</label>
                                    <input type="number" id="totalPrice-${newIndex}" name="products[${newIndex}].totalPrice" readonly>
                                    <div class="field-description">Automatically calculated</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                // Append the new product item
                productContainer.insertAdjacentHTML('beforeend', productTemplate);
                
                // Setup events for the new product
                window.setupProductEvents(newIndex);
                
                // Add remove event listener
                const newProduct = productContainer.lastElementChild;
                const removeBtn = newProduct.querySelector('.remove-product-btn');
                
                removeBtn.addEventListener('click', function() {
                    newProduct.remove();
                    renumberProducts();
                });
            });
            
            // Set up remove button for the initial product
            const initialRemoveBtn = document.querySelector('.product-item .remove-product-btn');
            initialRemoveBtn.addEventListener('click', function() {
                const products = productContainer.querySelectorAll('.product-item');
                
                // Don't remove if it's the only product
                if (products.length === 1) {
                    alert("You need at least one product in your order.");
                    return;
                }
                
                // Remove the product
                this.closest('.product-item').remove();
                renumberProducts();
            });
            
            // Function to renumber products after deletion
            function renumberProducts() {
                const products = productContainer.querySelectorAll('.product-item');
                
                products.forEach((product, idx) => {
                    // Update data attribute
                    product.dataset.productIndex = idx;
                    
                    // Update all field IDs and names
                    const fields = product.querySelectorAll('input, select');
                    fields.forEach(field => {
                        const fieldName = field.name.replace(/products\[\d+\]/, `products[${idx}]`);
                        field.name = fieldName;
                        
                        const fieldId = field.id.replace(/\-\d+$/, `-${idx}`);
                        field.id = fieldId;
                    });
                    
                    // Update labels
                    const labels = product.querySelectorAll('label');
                    labels.forEach(label => {
                        const forAttr = label.getAttribute('for').replace(/\-\d+$/, `-${idx}`);
                        label.setAttribute('for', forAttr);
                    });
                });
            }
        }
        
        function generateOrderSummary() {
            const orderSummary = document.getElementById('orderSummary');
            const formData = new FormData(document.getElementById('universalOrderForm'));
            
            let summaryHTML = '<div class="summary-section">';
            
            // Order Info Summary
            summaryHTML += `<h3>Order Information</h3>
                <div class="summary-content">
                    <p><strong>Order Number:</strong> ${formData.get('orderInfo.orderNumber')}</p>
                    <p><strong>Order Date:</strong> ${formData.get('orderInfo.orderDate')}</p>
                    <p><strong>PO Number:</strong> ${formData.get('orderInfo.poNumber') || 'N/A'}</p>
                </div>`;
            
            // Facility Info Summary
            summaryHTML += `<h3>Facility Information</h3>
                <div class="summary-content">
                    <p><strong>Facility Name:</strong> ${formData.get('facilityInfo.facilityName')}</p>
                    <p><strong>Contact Name:</strong> ${formData.get('facilityInfo.contactName')}</p>
                    <p><strong>Contact Phone:</strong> ${formData.get('facilityInfo.contactPhone')}</p>
                </div>`;
            
            // Shipping Info Summary
            summaryHTML += `<h3>Shipping Information</h3>
                <div class="summary-content">
                    <p><strong>Address:</strong> ${formData.get('shippingInfo.shippingAddressLine1')}, 
                        ${formData.get('shippingInfo.shippingCity')}, 
                        ${formData.get('shippingInfo.shippingState')} 
                        ${formData.get('shippingInfo.shippingZipCode')}</p>
                    <p><strong>Shipping Method:</strong> ${
                        document.getElementById('shippingMethod').options[
                            document.getElementById('shippingMethod').selectedIndex
                        ].text
                    }</p>
                </div>`;
            
            // Product Summary
            summaryHTML += `<h3>Products</h3>
                <div class="summary-content">
                    <table style="width: 100%; border-collapse: collapse; margin-bottom: 1rem;">
                        <thead>
                            <tr style="border-bottom: 1px solid #dee2e6;">
                                <th style="text-align: left; padding: 0.5rem;">Description</th>
                                <th style="text-align: left; padding: 0.5rem;">Size</th>
                                <th style="text-align: left; padding: 0.5rem;">Qty</th>
                                <th style="text-align: right; padding: 0.5rem;">Unit Price</th>
                                <th style="text-align: right; padding: 0.5rem;">Total</th>
                            </tr>
                        </thead>
                        <tbody>`;
            
            // Collect product data
            const products = document.querySelectorAll('.product-item');
            let orderTotal = 0;
            
            products.forEach((product, idx) => {
                const description = formData.get(`products[${idx}].description`);
                const size = formData.get(`products[${idx}].size`);
                const quantity = formData.get(`products[${idx}].quantity`);
                const unitPrice = formData.get(`products[${idx}].unitPrice`);
                const totalPrice = formData.get(`products[${idx}].totalPrice`);
                
                orderTotal += parseFloat(totalPrice || 0);
                
                summaryHTML += `<tr style="border-bottom: 1px solid #dee2e6;">
                    <td style="padding: 0.5rem;">${description}</td>
                    <td style="padding: 0.5rem;">${size}</td>
                    <td style="padding: 0.5rem;">${quantity}</td>
                    <td style="text-align: right; padding: 0.5rem;">${parseFloat(unitPrice).toFixed(2)}</td>
                    <td style="text-align: right; padding: 0.5rem;">${parseFloat(totalPrice).toFixed(2)}</td>
                </tr>`;
            });
            
            summaryHTML += `</tbody>
                <tfoot>
                    <tr>
                        <td colspan="4" style="text-align: right; padding: 0.5rem;"><strong>Order Total:</strong></td>
                        <td style="text-align: right; padding: 0.5rem;"><strong>${orderTotal.toFixed(2)}</strong></td>
                    </tr>
                </tfoot>
                </table>
                </div>`;
            
            summaryHTML += '</div>';
            
            orderSummary.innerHTML = summaryHTML;
        }
        
        function setupFormSubmission() {
            const form = document.getElementById('universalOrderForm');
            const submitBtn = document.getElementById('submitBtn');
            const responseContainer = document.getElementById('responseContainer');
            
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validate form
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                // Show loading state
                submitBtn.setAttribute('data-loading', 'true');
                submitBtn.disabled = true;
                
                // Get form data
                const formData = new FormData(form);
                const formObject = {};
                
                formData.forEach((value, key) => {
                    // Handle nested properties (e.g., 'orderInfo.orderNumber')
                    if (key.includes('.')) {
                        const [parent, child] = key.split('.');
                        formObject[parent] = formObject[parent] || {};
                        formObject[parent][child] = value;
                    } else if (key.includes('[')) {
                        // Handle array properties (e.g., 'products[0].quantity')
                        const matches = key.match(/([^\[]+)\[(\d+)\]\.(.+)/);
                        if (matches) {
                            const [, arrayName, index, property] = matches;
                            formObject[arrayName] = formObject[arrayName] || [];
                            formObject[arrayName][index] = formObject[arrayName][index] || {};
                            formObject[arrayName][index][property] = value;
                        }
                    } else {
                        formObject[key] = value;
                    }
                });
                
                // In a real application, you would send this data to a server
                // For demo purposes, we'll simulate a server response
                setTimeout(() => {
                    // Simulate successful submission
                    const success = true;
                    
                    if (success) {
                        responseContainer.className = 'success';
                        responseContainer.innerHTML = `
                            <h3>Order Submitted Successfully</h3>
                            <p>Your order #${formObject.orderInfo.orderNumber} has been received. A confirmation email will be sent shortly.</p>
                            <p>Tracking Number: MSC-${Math.floor(Math.random() * 10000000)}</p>
                        `;
                    } else {
                        responseContainer.className = 'error';
                        responseContainer.innerHTML = `
                            <h3>Error Submitting Order</h3>
                            <p>There was a problem processing your order. Please try again or contact customer support.</p>
                        `;
                    }
                    
                    responseContainer.style.display = 'block';
                    submitBtn.setAttribute('data-loading', 'false');
                    submitBtn.disabled = false;
                    
                    // Scroll to response
                    responseContainer.scrollIntoView({ behavior: 'smooth' });
                }, 2000); // Simulate network delay
            });
        }
    </script>
</body>
</html>
